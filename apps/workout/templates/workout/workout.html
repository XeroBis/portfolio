{% load static %}
{% load i18n %}
{% load custom_filters %}

{% include "home/head.html" %}

<body data-lang="{{ lang }}">
    {% include "home/header.html" %}
    <div class="container_workout">
        <h1 id="l_workout">
            {% trans "Workout Sessions" %}
        </h1>
        {% if user.is_authenticated %}
        <a href="/workout/add_workout/">
            <button id="btn_add_workout" class="cliquable">{% trans "Add Workout" %}</button>
        </a>
        {% endif %}

        <div id="workout-list">
            {% for data in workout_data %}
            <div>
                <h2 class="workout_date_type">
                    {{ data.workout.date }} - {{ data.workout.type_workout }}
                    {% if data.workout.duration > 0 %}
                    - {{ data.workout.duration|hours_minutes }}
                    {% endif %}
                </h2>
                {% if data.exercises %}
                <table>
                    <thead>
                        <tr>
                            <th>{% trans "Exercise" %}</th>
                            {% if data.workout.type_workout != "CrossFit" %}
                            <th>{% trans "Series" %}</th>
                            {% endif %}
                            <th>{% trans "Repetitions" %}</th>
                            <th>{% trans "Weight (kg)" %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for exercise in data.exercises %}
                        <tr>
                            <td>{{ exercise.name }}</td>
                            {% if data.workout.type_workout != "CrossFit" %}
                            <td>{{ exercise.nb_series }}</td>
                            {% endif %}
                            <td>{{ exercise.nb_repetition }}</td>
                            <td>{{ exercise.weight }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% endif %}
            </div>
            {% empty %}
            <p>
                {% trans "No workouts recorded." %}
            </p>
            {% endfor %}
        </div>

        {% if has_next %}
        <button id="load-more" class="cliquable" data-next-page="{{ next_page_number }}">
            {% trans "Load More" %}
        </button>
        <div id="loading-indicator" style="display: none; text-align: center; padding: 20px;">
            {% trans "Loading..." %}
        </div>
        {% endif %}
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{% static 'js/workout.js' %}"></script>
</body>